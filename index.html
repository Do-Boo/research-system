<!DOCTYPE html>
<html lang="ko">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ë¹„ì‚¬í†  í† ë¡  ê²€ìƒ‰ê¸°</title>
    <style>
        :root {
            /* ë¼ì´íŠ¸ ëª¨ë“œ ìƒ‰ìƒ */
            --bg-color: #fff;
            --text-color: #202124;
            --text-secondary: #70757a;
            --text-tertiary: #4d5156;
            --border-color: #dfe1e5;
            --border-hover: #dadce0;
            --shadow-color: rgba(64, 60, 67, .16);
            --card-bg: #f8f9fa;
            --card-border: #e8eaed;
            --tag-bg: #f1f3f4;
            --tag-text: #3c4043;
            --accent-color: #333;
            --hover-bg: #f8f9fa;
            --pro-bg: #e8f5e8;
            --pro-text: #137333;
            --con-bg: #fce8e6;
            --con-text: #d93025;
            --international-bg: #fef7e0;
            --international-text: #f9ab00;
            --detail-border: #f0f0f0;
        }

        [data-theme="dark"] {
            /* ë‹¤í¬ ëª¨ë“œ ìƒ‰ìƒ */
            --bg-color: #121212;
            --text-color: #e8eaed;
            --text-secondary: #9aa0a6;
            --text-tertiary: #bdc1c6;
            --border-color: #3c4043;
            --border-hover: #5f6368;
            --shadow-color: rgba(0, 0, 0, .3);
            --card-bg: #1f1f1f;
            --card-border: #3c4043;
            --tag-bg: #3c4043;
            --tag-text: #e8eaed;
            --accent-color: #8ab4f8;
            --hover-bg: #2d2d2d;
            --pro-bg: #1e3a1e;
            --pro-text: #81c995;
            --con-bg: #3d1a1a;
            --con-text: #f28b82;
            --international-bg: #3d3520;
            --international-text: #fdd663;
            --detail-border: #3c4043;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: arial, sans-serif;
            font-size: 14px;
            color: var(--text-color);
            background: var(--bg-color);
            margin: 0;
            padding: 0;
            transition: background-color 0.3s ease, color 0.3s ease;
        }

        .header {
            text-align: center;
            padding: 100px 20px 40px;
            position: relative;
        }

        .header h1 {
            font-size: 48px;
            font-weight: normal;
            color: var(--text-color);
            margin-bottom: 30px;
            letter-spacing: -1px;
        }

        .theme-toggle {
            position: absolute;
            top: 20px;
            right: 20px;
            background: none;
            border: 1px solid var(--border-color);
            border-radius: 20px;
            padding: 8px 16px;
            cursor: pointer;
            font-size: 14px;
            color: var(--text-color);
            background: var(--bg-color);
            transition: all 0.3s ease;
        }

        .theme-toggle:hover {
            background: var(--hover-bg);
            box-shadow: 0 2px 5px 1px var(--shadow-color);
        }

        .search-container {
            max-width: 584px;
            margin: 0 auto;
            position: relative;
        }

        .search-box {
            width: 100%;
            max-width: 584px;
            border: 1px solid var(--border-color);
            border-radius: 24px;
            padding: 10px 16px;
            font-size: 16px;
            outline: none;
            transition: box-shadow 0.2s, border-color 0.3s;
            background: var(--bg-color);
            color: var(--text-color);
        }

        .search-box:hover {
            box-shadow: 0 2px 5px 1px var(--shadow-color);
        }

        .search-box:focus {
            box-shadow: 0 2px 5px 1px var(--shadow-color);
            border-color: var(--accent-color);
        }

        .search-box::placeholder {
            color: var(--text-secondary);
        }

        .filters-container {
            max-width: 800px;
            margin: 30px auto;
            padding: 0 20px;
        }

        .filter-row {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            margin-bottom: 10px;
            align-items: center;
        }

        .filter-label {
            font-size: 13px;
            color: var(--text-secondary);
            width: 60px;
            flex-shrink: 0;
        }

        .filter-buttons {
            display: flex;
            flex-wrap: wrap;
            gap: 8px;
        }

        .filter-btn {
            padding: 6px 12px;
            border: 1px solid var(--border-hover);
            background: var(--bg-color);
            border-radius: 16px;
            cursor: pointer;
            font-size: 13px;
            color: var(--tag-text);
            transition: all 0.1s ease;
        }

        .filter-btn:hover {
            box-shadow: 0 1px 1px var(--shadow-color);
            background-color: var(--hover-bg);
        }

        .filter-btn.active {
            background: var(--accent-color);
            color: white;
            border-color: var(--accent-color);
        }

        .results-info {
            max-width: 800px;
            margin: 0 auto;
            padding: 0 20px;
            font-size: 13px;
            color: var(--text-secondary);
            margin-bottom: 20px;
        }

        .results-container {
            max-width: 800px;
            margin: 0 auto;
            padding: 0 20px;
        }

        .result-item {
            margin-bottom: 30px;
            padding-bottom: 20px;
        }

        .result-header {
            margin-bottom: 8px;
        }

        .result-stance {
            display: inline-block;
            padding: 2px 8px;
            border-radius: 12px;
            font-size: 11px;
            font-weight: 500;
            text-transform: uppercase;
            margin-right: 8px;
        }

        .stance-pro {
            background: var(--pro-bg);
            color: var(--pro-text);
        }

        .stance-con {
            background: var(--con-bg);
            color: var(--con-text);
        }

        .stance-international {
            background: var(--international-bg);
            color: var(--international-text);
        }

        .result-title {
            color: var(--text-color);
            font-size: 18px;
            font-weight: normal;
            text-decoration: none;
            margin-bottom: 5px;
            display: block;
            line-height: 1.3;
        }

        .result-title:hover {
            text-decoration: underline;
        }

        .result-category {
            color: var(--accent-color);
            font-size: 13px;
            margin-bottom: 5px;
        }

        .result-description {
            color: var(--text-tertiary);
            font-size: 14px;
            line-height: 1.4;
            margin-bottom: 10px;
        }

        .result-details {
            margin-top: 15px;
        }

        .detail-item {
            margin-bottom: 15px;
            padding-left: 15px;
            border-left: 2px solid var(--detail-border);
        }

        .detail-title {
            font-weight: 500;
            color: var(--text-color);
            margin-bottom: 5px;
            font-size: 14px;
        }

        .detail-content {
            color: var(--text-tertiary);
            font-size: 13px;
            line-height: 1.4;
            margin-bottom: 8px;
        }

        .detail-evidence {
            color: var(--text-secondary);
            font-size: 12px;
            font-style: italic;
            margin-bottom: 8px;
        }

        .source-info {
            background: var(--card-bg);
            padding: 8px 12px;
            border-radius: 4px;
            border: 1px solid var(--card-border);
            font-size: 12px;
        }

        .source-title {
            color: var(--accent-color);
            text-decoration: none;
            font-weight: 400;
        }

        .source-title:hover {
            text-decoration: underline;
        }

        .source-meta {
            color: var(--text-secondary);
            margin-top: 2px;
        }

        .tags {
            margin-top: 10px;
        }

        .tag {
            display: inline-block;
            background: var(--tag-bg);
            color: var(--tag-text);
            padding: 2px 6px;
            border-radius: 8px;
            font-size: 11px;
            margin: 2px 4px 2px 0;
        }

        .tag.highlight {
            background: var(--accent-color);
            color: white;
        }

        .no-results {
            text-align: center;
            padding: 60px 20px;
            color: var(--text-secondary);
        }

        .loading {
            text-align: center;
            padding: 60px 20px;
            color: var(--text-secondary);
        }

        .stats {
            max-width: 800px;
            margin: 20px auto;
            padding: 0 20px;
            font-size: 12px;
            color: var(--text-secondary);
            border-bottom: 1px solid var(--card-border);
            padding-bottom: 15px;
        }

        @media (max-width: 768px) {
            .header {
                padding: 60px 20px 30px;
            }

            .header h1 {
                font-size: 32px;
            }

            .theme-toggle {
                top: 15px;
                right: 15px;
                padding: 6px 12px;
                font-size: 12px;
            }

            /* 
            .filter-row {
                flex-direction: column;
                align-items: flex-start;
            } 
            */

            .filter-label {
                width: auto;
                margin-bottom: 5px;
            }

            .result-title {
                font-size: 16px;
            }


        }

        /* ì»´íŒ©íŠ¸ ë·° */
        .compact-view .result-details {
            display: none;
        }

        .view-toggle {
            text-align: right;
            margin-bottom: 20px;
            max-width: 800px;
            margin-left: auto;
            margin-right: auto;
            padding: 0 20px;
        }

        .view-btn {
            background: none;
            border: none;
            color: var(--accent-color);
            cursor: pointer;
            font-size: 13px;
            margin-left: 15px;
            text-decoration: underline;
        }

        .view-btn.active {
            color: var(--text-color);
            text-decoration: none;
            font-weight: 500;
        }

        /* ë°˜ë°• ë…¼ê±° ìŠ¤íƒ€ì¼ */
        .counter-arguments-section {
            margin-top: 20px;
            padding: 15px;
            background: var(--card-bg);
            border: 1px solid var(--card-border);
            border-radius: 8px;
        }

        .counter-arguments-title {
            font-size: 16px;
            font-weight: 600;
            color: var(--accent-color);
            margin-bottom: 15px;
            padding-bottom: 8px;
            border-bottom: 1px solid var(--border-color);
        }

        .counter-argument {
            margin-bottom: 15px;
            padding: 12px;
            background: var(--bg-color);
            border-radius: 6px;
            border-left: 3px solid var(--accent-color);
        }

        .counter-argument:last-child {
            margin-bottom: 0;
        }

        .opposing-claim {
            margin-bottom: 8px;
            padding: 8px;
            background: var(--con-bg);
            color: var(--con-text);
            border-radius: 4px;
            font-size: 14px;
        }

        .rebuttal-content {
            margin-bottom: 8px;
            padding: 8px;
            background: var(--pro-bg);
            color: var(--pro-text);
            border-radius: 4px;
            font-size: 14px;
        }

        .rebuttal-evidence {
            padding: 6px;
            background: var(--hover-bg);
            color: var(--text-secondary);
            border-radius: 4px;
            font-size: 13px;
            font-style: italic;
        }
    </style>
</head>

<body>
    <div class="header">
        <button class="theme-toggle" id="themeToggle">
            <span class="theme-text">ë‹¤í¬ ëª¨ë“œ</span>
        </button>
        <h1>ë¹„ì‚¬í†  í† ë¡  ê²€ìƒ‰ê¸°</h1>
        <div class="search-container">
            <input type="text" id="searchInput" class="search-box" placeholder="ë…¼ê±°, í‚¤ì›Œë“œ, ì¶œì²˜ ê²€ìƒ‰...">
        </div>
    </div>

    <div class="filters-container">
        <div class="filter-row">
            <div class="filter-label">ì…ì¥</div>
            <div class="filter-buttons" id="stanceFilters">
                <button class="filter-btn active" data-filter="stance" data-value="all">ì „ì²´</button>
                <button class="filter-btn" data-filter="stance" data-value="pro">ì°¬ì„±</button>
                <button class="filter-btn" data-filter="stance" data-value="con">ë°˜ëŒ€</button>
                <button class="filter-btn" data-filter="stance" data-value="international">í•´ì™¸ì‚¬ë¡€</button>
            </div>
        </div>

        <div class="filter-row">
            <div class="filter-label">ì£¼ì œ</div>
            <div class="filter-buttons" id="categoryFilters">
                <button class="filter-btn active" data-filter="category" data-value="all">ì „ì²´</button>
                <button class="filter-btn" data-filter="category" data-value="cyberViolence">ì‚¬ì´ë²„í­ë ¥</button>
                <button class="filter-btn" data-filter="category" data-value="rights">ê¸°ë³¸ê¶Œ</button>
                <button class="filter-btn" data-filter="category" data-value="privacy">ê°œì¸ì •ë³´</button>
                <button class="filter-btn" data-filter="category" data-value="effectiveness">ì‹¤íš¨ì„±</button>
            </div>
        </div>

        <div class="filter-row">
            <div class="filter-label">ì¶œì²˜</div>
            <div class="filter-buttons" id="sourceFilters">
                <button class="filter-btn active" data-filter="source" data-value="all">ì „ì²´</button>
                <button class="filter-btn" data-filter="source" data-value="academic">í•™ìˆ ë…¼ë¬¸</button>
                <button class="filter-btn" data-filter="source" data-value="government">ì •ë¶€ìë£Œ</button>
                <button class="filter-btn" data-filter="source" data-value="media">ì–¸ë¡ </button>
            </div>
        </div>
    </div>

    <div class="stats" id="statsContainer"></div>

    <div class="view-toggle">
        <button class="view-btn active" id="detailedView">ìƒì„¸ë³´ê¸°</button>
        <button class="view-btn" id="compactView">ê°„ë‹¨ë³´ê¸°</button>
    </div>

    <div class="results-info" id="resultsInfo"></div>

    <div class="results-container" id="resultsContainer">
        <div class="loading">ë°ì´í„°ë¥¼ ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘...</div>
    </div>

    <script>
        // ì „ì—­ ë³€ìˆ˜
        let debateData = null;
        let filteredResults = [];
        let currentFilters = {
            stance: 'all',
            category: 'all',
            source: 'all'
        };
        let searchTerm = '';
        let isDetailedView = true;

        // í…Œë§ˆ ê´€ë¦¬
        function initializeTheme() {
            const savedTheme = localStorage.getItem('theme') || 'light';
            setTheme(savedTheme);

            document.getElementById('themeToggle').addEventListener('click', toggleTheme);
        }

        function setTheme(theme) {
            document.documentElement.setAttribute('data-theme', theme);
            const themeToggle = document.getElementById('themeToggle');
            const themeText = themeToggle.querySelector('.theme-text');

            if (theme === 'dark') {
                themeText.textContent = 'ë¼ì´íŠ¸ ëª¨ë“œ';
            } else {
                themeText.textContent = 'ë‹¤í¬ ëª¨ë“œ';
            }

            localStorage.setItem('theme', theme);
        }

        function toggleTheme() {
            const currentTheme = document.documentElement.getAttribute('data-theme');
            const newTheme = currentTheme === 'dark' ? 'light' : 'dark';
            setTheme(newTheme);
        }

        // JSON ë°ì´í„° ë¡œë“œ
        async function loadDebateData() {
            try {
                const response = await fetch('./debate-data.json');
                if (!response.ok) {
                    throw new Error(`HTTP error! status: ${response.status}`);
                }
                const data = await response.json();
                return data;
            } catch (error) {
                console.error('JSON íŒŒì¼ì„ ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤:', error);
                // ì˜¤ë¥˜ ë°œìƒ ì‹œ ê¸°ë³¸ ë°ì´í„° ì‚¬ìš©
                return getDefaultData();
            }
        }

        // ê¸°ë³¸ ë°ì´í„° (JSON íŒŒì¼ ë¡œë“œ ì‹¤íŒ¨ ì‹œ ì‚¬ìš©)
        function getDefaultData() {
            return {
                "arguments": {
                    "pro": [
                        {
                            "id": "pro-cyber-violence-prevention",
                            "category": "ì‚¬ì´ë²„ í­ë ¥ ë°©ì§€",
                            "title": "ì•…ì„± ëŒ“ê¸€ ë° ì‚¬ì´ë²„ ë¶ˆë§ ê°ì†Œ",
                            "description": "ì‹¤ëª… ê³µê°œë¥¼ í†µí•œ ì±…ì„ê° ìˆëŠ” ì˜¨ë¼ì¸ í–‰ë™ ìœ ë„ë¡œ ì‚¬ì´ë²„ í­ë ¥ ì–µì œ",
                            "details": [
                                {
                                    "subTitle": "ì•…ì„± ëŒ“ê¸€ ê°ì†Œ íš¨ê³¼",
                                    "content": "ì‹¤ëª… ê³µê°œ ì‹œ ë¬´ë¶„ë³„í•œ ë¹„ë°©ê³¼ ìš•ì„¤ ëŒ“ê¸€ ì‘ì„±ì´ í˜„ì €íˆ ê°ì†Œí•˜ë©°, ê²Œì‹œë¬¼ì˜ ì§ˆì  í–¥ìƒì´ ê¸°ëŒ€ë¨",
                                    "evidence": "ì„œìš¸ëŒ€í•™êµ ì—°êµ¬íŒ€ì˜ ì‹¤ì¦ ë¶„ì„ì— ë”°ë¥´ë©´ ì‹¤ëª…ì œ ë„ì… í›„ ëŒ“ê¸€ ìˆ˜ëŠ” ê°ì†Œí–ˆìœ¼ë‚˜ ì•…ì„± ëŒ“ê¸€ ë¹„ìœ¨ì´ ìœ ì˜ë¯¸í•˜ê²Œ ì¤„ì–´ë“¦",
                                    "source": {
                                        "title": "ì¸í„°ë„· ê²Œì‹œíŒ ì‹¤ëª…ì œì˜ íš¨ê³¼ì— ëŒ€í•œ ì‹¤ì¦ ì—°êµ¬",
                                        "authors": ["ìš°ì§€ìˆ™", "ë‚˜í˜„ìˆ˜", "ìµœì •ë¯¼"],
                                        "institution": "ì„œìš¸ëŒ€í•™êµ",
                                        "url": "https://www.dbpia.co.kr/journal/articleDetail?nodeId=NODE11649668",
                                        "type": "í•™ìˆ ë…¼ë¬¸"
                                    },
                                    "tags": ["ì•…ì„±ëŒ“ê¸€ê°ì†Œ", "ì‹¤ì¦ì—°êµ¬", "ëŒ“ê¸€í’ˆì§ˆí–¥ìƒ", "ì±…ì„ê°ì¦ëŒ€"]
                                }
                            ],
                            "mainTags": ["ì°¬ì„±", "ì‚¬ì´ë²„í­ë ¥", "ì•…ì„±ëŒ“ê¸€", "ì˜¨ë¼ì¸ê´´ë¡­í˜", "ì±…ì„ê°", "ì–µì œíš¨ê³¼"]
                        }
                    ],
                    "con": [
                        {
                            "id": "con-constitutional-rights",
                            "category": "í—Œë²•ì  ê¸°ë³¸ê¶Œ ì¹¨í•´",
                            "title": "í‘œí˜„ì˜ ììœ ì™€ ìµëª… í‘œí˜„ê¶Œ ì œì•½",
                            "description": "í—Œë²•ìƒ ë³´ì¥ëœ í‘œí˜„ì˜ ììœ  ê³¼ë„í•œ ì œí•œê³¼ ìµëª… í‘œí˜„ê¶Œ ì¹¨í•´",
                            "details": [
                                {
                                    "subTitle": "í‘œí˜„ì˜ ììœ  ì¹¨í•´",
                                    "content": "í—Œë²• ì œ21ì¡°ì—ì„œ ë³´ì¥í•˜ëŠ” í‘œí˜„ì˜ ììœ ë¥¼ ê³¼ë„í•˜ê²Œ ì œí•œí•˜ì—¬ í—Œë²• ì •ì‹ ì— ìœ„ë°°",
                                    "evidence": "2012ë…„ í—Œë²•ì¬íŒì†ŒëŠ” ì¸í„°ë„· ì‹¤ëª…ì œê°€ í‘œí˜„ì˜ ììœ ë¥¼ ê³¼ë„í•˜ê²Œ ì œí•œí•œë‹¤ë©° ìœ„í—Œ ê²°ì •",
                                    "source": {
                                        "title": "í—Œë²•ì¬íŒì†Œ 2012. 8. 23. ì„ ê³  2010í—Œë§ˆ47 ê²°ì •",
                                        "authors": ["í—Œë²•ì¬íŒì†Œ"],
                                        "institution": "í—Œë²•ì¬íŒì†Œ",
                                        "url": "https://casenote.kr/í—Œë²•ì¬íŒì†Œ/2012í—Œì•„11",
                                        "type": "íŒë¡€"
                                    },
                                    "tags": ["í‘œí˜„ì˜ììœ ", "í—Œë²•ìœ„ë°˜", "í—Œì¬ê²°ì •", "ìœ„í—ŒíŒê²°"]
                                }
                            ],
                            "mainTags": ["ë°˜ëŒ€", "ê¸°ë³¸ê¶Œì¹¨í•´", "í‘œí˜„ì˜ììœ ", "ìµëª…ê¶Œ", "í—Œë²•ì¬íŒì†Œ", "ìœ„í—Œ"]
                        }
                    ]
                },
                "internationalCases": []
            };
        }

        // ì´ˆê¸°í™”
        document.addEventListener('DOMContentLoaded', async function () {
            // í…Œë§ˆ ì´ˆê¸°í™”
            initializeTheme();

            // ë¡œë”© ìƒíƒœ í‘œì‹œ
            document.getElementById('resultsContainer').innerHTML = '<div class="loading">ë°ì´í„°ë¥¼ ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘...</div>';
            document.getElementById('resultsInfo').textContent = 'ë°ì´í„° ë¡œë”© ì¤‘...';

            try {
                // JSON ë°ì´í„° ë¡œë“œ
                debateData = await loadDebateData();

                // ë°ì´í„° ìœ íš¨ì„± ê²€ì¦
                if (!debateData || !debateData.arguments) {
                    throw new Error('ì˜ëª»ëœ ë°ì´í„° í˜•ì‹ì…ë‹ˆë‹¤.');
                }

                // ë°ì´í„° ë¡œë“œ ì™„ë£Œ í›„ ì´ˆê¸°í™”
                initializeFilters();
                performSearch();

                // ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ
                document.getElementById('searchInput').addEventListener('input', handleSearch);
                document.getElementById('detailedView').addEventListener('click', () => setViewMode(true));
                document.getElementById('compactView').addEventListener('click', () => setViewMode(false));

                console.log('DebateSeeker: ë°ì´í„°ê°€ ì„±ê³µì ìœ¼ë¡œ ë¡œë“œë˜ì—ˆìŠµë‹ˆë‹¤.');
                console.log('ë¡œë“œëœ ë°ì´í„°:', debateData);
            } catch (error) {
                console.error('DebateSeeker: ì´ˆê¸°í™” ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤:', error);
                document.getElementById('resultsContainer').innerHTML = `
                    <div class="no-results">
                        ë°ì´í„°ë¥¼ ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.<br>
                        í˜ì´ì§€ë¥¼ ìƒˆë¡œê³ ì¹¨í•˜ê±°ë‚˜ ê´€ë¦¬ìì—ê²Œ ë¬¸ì˜í•˜ì„¸ìš”.
                    </div>
                `;
            }
        });

        // í•„í„° ì´ˆê¸°í™”
        function initializeFilters() {
            const filterButtons = document.querySelectorAll('.filter-btn');
            filterButtons.forEach(btn => {
                btn.addEventListener('click', handleFilterClick);
            });
        }

        // í•„í„° í´ë¦­ ì²˜ë¦¬
        function handleFilterClick(event) {
            const btn = event.target;
            const filterType = btn.dataset.filter;
            const filterValue = btn.dataset.value;

            // ê°™ì€ ê·¸ë£¹ì˜ ë‹¤ë¥¸ ë²„íŠ¼ë“¤ ë¹„í™œì„±í™”
            const groupButtons = document.querySelectorAll(`[data-filter="${filterType}"]`);
            groupButtons.forEach(b => b.classList.remove('active'));

            // í´ë¦­ëœ ë²„íŠ¼ í™œì„±í™”
            btn.classList.add('active');

            // í•„í„° ìƒíƒœ ì—…ë°ì´íŠ¸
            currentFilters[filterType] = filterValue;

            // ê²€ìƒ‰ ì‹¤í–‰
            performSearch();
        }

        // ê²€ìƒ‰ ì²˜ë¦¬
        function handleSearch(event) {
            searchTerm = event.target.value.toLowerCase();
            performSearch();
        }

        // ê²€ìƒ‰ ì‹¤í–‰
        function performSearch() {
            filteredResults = [];

            // ë°ì´í„°ê°€ ë¡œë“œë˜ì§€ ì•Šì•˜ìœ¼ë©´ ì¢…ë£Œ
            if (!debateData || !debateData.arguments) {
                console.warn('DebateSeeker: ë°ì´í„°ê°€ ì•„ì§ ë¡œë“œë˜ì§€ ì•Šì•˜ìŠµë‹ˆë‹¤.');
                return;
            }

            // ì°¬ì„± ë…¼ê±° í•„í„°ë§
            if (currentFilters.stance === 'all' || currentFilters.stance === 'pro') {
                const proArguments = debateData.arguments.pro || [];
                proArguments.forEach(arg => {
                    if (matchesFilter(arg, 'pro')) {
                        filteredResults.push({ ...arg, stance: 'pro' });
                    }
                });
            }

            // ë°˜ëŒ€ ë…¼ê±° í•„í„°ë§
            if (currentFilters.stance === 'all' || currentFilters.stance === 'con') {
                const conArguments = debateData.arguments.con || [];
                conArguments.forEach(arg => {
                    if (matchesFilter(arg, 'con')) {
                        filteredResults.push({ ...arg, stance: 'con' });
                    }
                });
            }

            // í•´ì™¸ ì‚¬ë¡€ í•„í„°ë§
            if (currentFilters.stance === 'all' || currentFilters.stance === 'international') {
                const internationalCases = debateData.internationalCases || [];
                internationalCases.forEach(caseItem => {
                    if (matchesFilter(caseItem, 'international')) {
                        filteredResults.push({ ...caseItem, stance: 'international' });
                    }
                });
            }

            updateStats();
            renderResults();
        }

        // í•„í„° ë§¤ì¹­ í™•ì¸
        function matchesFilter(item, stance) {
            // í…ìŠ¤íŠ¸ ê²€ìƒ‰
            if (searchTerm && !matchesSearchTerm(item)) {
                return false;
            }

            // ì¹´í…Œê³ ë¦¬ í•„í„°
            if (currentFilters.category !== 'all' && !matchesCategory(item)) {
                return false;
            }

            // ì¶œì²˜ í•„í„°
            if (currentFilters.source !== 'all' && !matchesSource(item)) {
                return false;
            }

            return true;
        }

        // ê²€ìƒ‰ì–´ ë§¤ì¹­
        function matchesSearchTerm(item) {
            const searchableText = [
                item.title || '',
                item.description || '',
                item.category || '',
                item.country || '',
                ...(item.mainTags || []),
                ...(item.details || []).map(d => [d.content, d.evidence].join(' '))
            ].join(' ').toLowerCase();

            return searchableText.includes(searchTerm);
        }

        // ì¹´í…Œê³ ë¦¬ ë§¤ì¹­
        function matchesCategory(item) {
            const categoryMap = {
                'cyberViolence': ['ì‚¬ì´ë²„í­ë ¥', 'ì•…ì„±ëŒ“ê¸€', 'ì˜¨ë¼ì¸ê´´ë¡­í˜', 'ì‚¬ì´ë²„ë¶ˆë§'],
                'rights': ['ê¸°ë³¸ê¶Œì¹¨í•´', 'í‘œí˜„ì˜ììœ ', 'ìµëª…ê¶Œ', 'í—Œë²•ìœ„ë°˜'],
                'privacy': ['ê°œì¸ì •ë³´ë³´í˜¸', 'í”„ë¼ì´ë²„ì‹œ', 'ì •ë³´ìœ ì¶œ', 'ê°ì‹œì‚¬íšŒ'],
                'effectiveness': ['ì‹¤íš¨ì„±ë¶€ì¡±', 'ê¸°ìˆ ì ìš°íšŒ', 'í•´ì™¸ì‚¬ì´íŠ¸', 'ê¸€ë¡œë²Œì¸í„°ë„·']
            };

            const keywords = categoryMap[currentFilters.category] || [];
            const itemTags = item.mainTags || [];

            return keywords.some(keyword =>
                itemTags.some(tag => tag.includes(keyword)) ||
                (item.category && item.category.includes(keyword))
            );
        }

        // ì¶œì²˜ ë§¤ì¹­
        function matchesSource(item) {
            const sourceMap = {
                'academic': ['í•™ìˆ ë…¼ë¬¸', 'ì—°êµ¬'],
                'government': ['ì •ë¶€ìë£Œ', 'í—Œë²•ì¬íŒì†Œ', 'íŒë¡€'],
                'media': ['ì–¸ë¡ ë³´ë„', 'ì–¸ë¡ ê¸°ê³ ']
            };

            const keywords = sourceMap[currentFilters.source] || [];

            if (item.details) {
                return item.details.some(detail =>
                    detail.source && keywords.some(keyword =>
                        detail.source.type.includes(keyword)
                    )
                );
            }

            return false;
        }

        // í†µê³„ ì—…ë°ì´íŠ¸
        function updateStats() {
            const proCount = filteredResults.filter(r => r.stance === 'pro').length;
            const conCount = filteredResults.filter(r => r.stance === 'con').length;
            const caseCount = filteredResults.filter(r => r.stance === 'international').length;

            document.getElementById('statsContainer').textContent =
                `ì°¬ì„± ${proCount}ê°œ Â· ë°˜ëŒ€ ${conCount}ê°œ Â· í•´ì™¸ì‚¬ë¡€ ${caseCount}ê°œ`;
        }

        // ê²°ê³¼ ë Œë”ë§
        function renderResults() {
            const container = document.getElementById('resultsContainer');
            const infoElement = document.getElementById('resultsInfo');

            infoElement.textContent = `ê²€ìƒ‰ê²°ê³¼ ì•½ ${filteredResults.length}ê°œ`;

            if (filteredResults.length === 0) {
                container.innerHTML = `
                    <div class="no-results">
                        ê²€ìƒ‰ ì¡°ê±´ì— ë§ëŠ” ê²°ê³¼ê°€ ì—†ìŠµë‹ˆë‹¤.<br>
                        ë‹¤ë¥¸ í‚¤ì›Œë“œë‚˜ í•„í„°ë¥¼ ì‹œë„í•´ë³´ì„¸ìš”.
                    </div>
                `;
                return;
            }

            const html = filteredResults.map(item => renderResultItem(item)).join('');
            container.innerHTML = html;

            // ì»´íŒ©íŠ¸ ë·° ì ìš©
            container.classList.toggle('compact-view', !isDetailedView);
        }

        // ê²°ê³¼ ì•„ì´í…œ ë Œë”ë§
        function renderResultItem(item) {
            const stanceClass = item.stance;
            const stanceName = {
                'pro': 'ì°¬ì„±',
                'con': 'ë°˜ëŒ€',
                'international': 'í•´ì™¸ì‚¬ë¡€'
            }[item.stance];

            const detailsHtml = (item.details || []).map(detail => `
                <div class="detail-item">
                    <div class="detail-title">${detail.subTitle}</div>
                    <div class="detail-content">${detail.content}</div>
                    <div class="detail-evidence">${detail.evidence}</div>
                    <div class="source-info">
                        <a href="${detail.source.url}" class="source-title" target="_blank">${detail.source.title}</a>
                        <div class="source-meta">${detail.source.authors.join(', ')} - ${detail.source.institution} (${detail.source.type})</div>
                    </div>
                </div>
            `).join('');

            // ë°˜ë°• ë…¼ê±° HTML (ì°¬ì„± ì¸¡ì—ë§Œ í‘œì‹œ)
            const counterArgumentsHtml = (item.stance === 'pro' && item.counterArguments) ? `
                <div class="counter-arguments-section">
                    <div class="counter-arguments-title">ğŸ’¬ ë°˜ëŒ€ ë…¼ê±°ì— ëŒ€í•œ ë°˜ë°•</div>
                    ${item.counterArguments.map(counter => `
                        <div class="counter-argument">
                            <div class="opposing-claim">
                                <strong>ë°˜ëŒ€ì¸¡ ì£¼ì¥:</strong> ${counter.opposingClaim}
                            </div>
                            <div class="rebuttal-content">
                                <strong>ì°¬ì„±ì¸¡ ë°˜ë°•:</strong> ${counter.rebuttal}
                            </div>
                            <div class="rebuttal-evidence">
                                <strong>ë°˜ë°• ê·¼ê±°:</strong> ${counter.evidence}
                            </div>
                        </div>
                    `).join('')}
                </div>
            ` : '';

            const tagsHtml = (item.mainTags || []).map(tag => `
                <span class="tag ${searchTerm && tag.toLowerCase().includes(searchTerm) ? 'highlight' : ''}">${tag}</span>
            `).join('');

            return `
                <div class="result-item">
                    <div class="result-header">
                        <span class="result-stance stance-${stanceClass}">${stanceName}</span>
                    </div>
                    <a href="#" class="result-title">${item.title}</a>
                    <div class="result-category">${item.category || item.country}</div>
                    <div class="result-description">${item.description}</div>
                    
                    <div class="result-details">
                        ${detailsHtml}
                    </div>

                    ${counterArgumentsHtml}

                    <div class="tags">
                        ${tagsHtml}
                    </div>
                </div>
            `;
        }

        // ë·° ëª¨ë“œ ì„¤ì •
        function setViewMode(detailed) {
            isDetailedView = detailed;

            document.getElementById('detailedView').classList.toggle('active', detailed);
            document.getElementById('compactView').classList.toggle('active', !detailed);

            renderResults();
        }


    </script>
</body>

</html>